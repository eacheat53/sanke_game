# 贪吃蛇游戏 (Snake Game)

一个使用Python和Pygame开发的经典贪吃蛇游戏，包含多种游戏模式、存档系统和成就系统。

## 功能特性

### 基础功能
- 经典贪吃蛇游戏玩法
- 游戏开始前参数设置界面
- 可调节游戏难度、速度、初始蛇长度
- 音效开关和网格显示选项
- 得分系统和最高分记录
- 简洁直观的用户界面
- 键盘控制（方向键）

### 高级功能
- **多种游戏模式**：经典、时间挑战、生存、禅模式、混沌模式
- **存档系统**：保存和加载游戏进度
- **成就系统**：解锁成就，记录游戏统计数据
- **动画效果**：淡入淡出、粒子效果、缩放动画等
- **性能优化**：脏矩形渲染、资源缓存
- **输入优化**：防抖动、组合键支持

## 安装要求

```bash
pip install pygame python-dotenv
```

或使用Conda环境：

```bash
conda env create -f environment.yml
conda activate snake_game
```

## 如何运行

```bash
python main.py
```

游戏包含完整的设置界面，游戏结束后可以返回设置界面重新配置参数。

## 游戏控制

### 设置界面控制
- ↑↓ 方向键：选择设置项
- ←→ 方向键：调整设置值
- 回车键：确认/开始游戏
- ESC：退出

### 游戏内控制
- ↑ 上方向键：向上移动
- ↓ 下方向键：向下移动
- ← 左方向键：向左移动
- → 右方向键：向右移动
- P：暂停/继续游戏
- ESC：退出游戏

### 游戏结束时
- SPACE：重新开始游戏
- R：返回设置界面
- S：保存游戏数据
- ESC：退出游戏

## 游戏模式

### 经典模式
传统的贪吃蛇游戏，随着分数增加速度会提升。

### 时间挑战模式
在限定时间内获得尽可能高的分数，得分有1.5倍加成。

### 生存模式
速度会持续增加，看你能坚持多久，分数随速度提升而增加。

### 禅模式
放松的游戏体验，速度不会增加，有多条生命可以重生。

### 混沌模式
随机事件不断发生，包括速度变化、双倍分数、穿墙效果等。

## 项目结构

```
snake_game/
├── main.py                  # 游戏主入口（包含设置界面）
├── game_config.py           # 游戏配置管理
├── config.json              # 游戏配置文件
├── high_score.json          # 最高分记录
├── environment.yml          # Conda环境配置
├── game/
│   ├── __init__.py
│   ├── snake.py             # 蛇类
│   ├── food.py              # 食物类
│   ├── game_engine.py       # 游戏引擎
│   ├── menu.py              # 菜单系统
│   ├── sound_manager.py     # 音效管理
│   ├── constants.py         # 游戏常量
│   ├── resource_manager.py  # 资源管理器
│   ├── render_optimizer.py  # 渲染优化器
│   ├── save_manager.py      # 存档管理器
│   ├── game_modes.py        # 游戏模式管理
│   ├── achievement_system.py # 成就系统
│   ├── animation_manager.py # 动画管理器
│   └── input_manager.py     # 输入管理器
├── assets/
│   └── sounds/              # 音效文件
├── saves/                   # 游戏存档目录
├── utils/
│   ├── __init__.py
│   ├── helpers.py           # 辅助函数
│   └── env_loader.py        # 环境变量加载
├── requirements.txt         # 依赖包列表
├── .env.example             # 环境变量示例
└── README.md                # 项目说明
```

## 游戏设置选项

### 游戏难度
- **简单**：速度较慢，适合新手
- **普通**：中等速度，平衡体验
- **困难**：速度较快，挑战性强

### 游戏速度
- 可调节范围：5-30 FPS
- 数值越高游戏速度越快

### 初始蛇长度
- 可调节范围：1-10 节
- 影响游戏开始时蛇的长度

### 音效开关
- 开启/关闭游戏音效

### 网格显示
- 显示/隐藏游戏网格线

## 游戏规则

1. 控制蛇移动吃食物
2. 每吃一个食物，蛇身变长，得分增加
3. 普通食物得10分，特殊食物（金色闪烁）得20分
4. 撞到墙壁或自己的身体游戏结束
5. 不同游戏模式有不同规则和分数倍率
6. 目标是获得尽可能高的分数

## 技术特性

### 性能优化
- 脏矩形渲染：只更新变化的屏幕区域
- 资源缓存：缓存字体和文本表面
- 渲染批处理：减少绘制调用次数

### 用户体验
- 动画效果：增加游戏视觉反馈
- 输入防抖：避免过快的按键响应
- 粒子系统：添加视觉特效

### 代码质量
- 类型注解：提高代码可读性
- 模块化设计：清晰的职责分离
- 配置验证：防止无效配置

## 成就系统

游戏包含多种成就，可以通过不同的游戏表现解锁：

- 分数相关成就（达到特定分数）
- 蛇长度相关成就（达到特定长度）
- 游戏时间相关成就（生存特定时间）
- 特殊食物相关成就（吃到特定数量的特殊食物）
- 隐藏成就（特殊条件触发）

## 存档系统

游戏支持保存和加载游戏状态：

- 保存当前游戏进度
- 加载之前的游戏进度
- 查看存档列表和详情
- 导入/导出存档